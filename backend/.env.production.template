# AeroSense Backend - Production Environment Template
# ⚠️  CRITICAL: Do NOT use this file directly as .env.production
# ⚠️  CRITICAL: Generate secure secrets and store in AWS Secrets Manager, NOT in repository
# ⚠️  CRITICAL: Production secrets must be at least 32 characters with high entropy

# =============================================================================
# INSTRUCTIONS BEFORE DEPLOYMENT
# =============================================================================
# 1. Generate all secrets using: openssl rand -base64 32
# 2. Store secrets in AWS Secrets Manager (not in git)
# 3. Reference secrets in ECS task definition or Fargate overrides
# 4. NEVER commit actual .env.production file to git repository

# =============================================================================
# SECRET GENERATION COMMANDS
# =============================================================================
# JWT Secret:
#   openssl rand -base64 32
#
# Database Password:
#   openssl rand -base64 24 | tr -d "=+/" | cut -c1-25
#
# Redis Auth Token:
#   openssl rand -base64 32
#
# API Keys: Obtain from service providers

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================
NODE_ENV=production
PORT=3000
HOST=0.0.0.0
LOG_LEVEL=info

# =============================================================================
# DATABASE (PostgreSQL - RDS Multi-AZ)
# =============================================================================
# ⚠️  CRITICAL: Replace with actual production RDS endpoint
# ⚠️  CRITICAL: Use strong password (25+ chars, mixed case, numbers, symbols)
DATABASE_URL="postgresql://aerosense:CHANGE_ME_RDS_PRODUCTION_PASSWORD@production-aerosense-db.XXXXXX.us-east-1.rds.amazonaws.com:5432/aerosense?schema=public&sslmode=require"
DATABASE_POOL_SIZE=50
DATABASE_CONNECTION_TIMEOUT=30

# =============================================================================
# REDIS CACHE (ElastiCache Multi-AZ with Encryption)
# =============================================================================
# ⚠️  CRITICAL: Replace with actual production ElastiCache endpoint
# ⚠️  CRITICAL: Use AUTH token (32+ chars)
REDIS_URL="rediss://CHANGE_ME_REDIS_AUTH_TOKEN@production-aerosense-redis.XXXXXX.cache.amazonaws.com:6379"
REDIS_PASSWORD="CHANGE_ME_REDIS_AUTH_TOKEN"
REDIS_TTL=60
REDIS_MAX_RETRIES=3

# =============================================================================
# JWT AUTHENTICATION
# =============================================================================
# ⚠️  CRITICAL: Generate secure secret (minimum 32 characters)
# ⚠️  CRITICAL: Store in AWS Secrets Manager, not here
# ⚠️  CRITICAL: Rotate periodically (recommend quarterly)
JWT_SECRET="CHANGE_ME_GENERATE_WITH_openssl_rand_base64_32_MIN_32_CHARS"
JWT_EXPIRES_IN="15m"
REFRESH_TOKEN_EXPIRES_IN="30d"

# =============================================================================
# RATE LIMITING
# =============================================================================
FREE_RATE_LIMIT=100
PREMIUM_RATE_LIMIT=1000
RATE_LIMIT_WINDOW=3600000

# =============================================================================
# FLIGHTAWARE API
# =============================================================================
# ⚠️  CRITICAL: Use production API key
# ⚠️  CRITICAL: Monitor API usage to control costs
FLIGHTAWARE_API_KEY="CHANGE_ME_PRODUCTION_FLIGHTAWARE_API_KEY"
FLIGHTAWARE_API_BASE="https://aeroapi.flightaware.com/aeroapi"

# =============================================================================
# CORS CONFIGURATION
# =============================================================================
# ⚠️  CRITICAL: Only allow actual production origins
# ⚠️  CRITICAL: No wildcards, no localhost
CORS_ORIGIN="https://aerosense.app,https://www.aerosense.app"

# =============================================================================
# AWS INFRASTRUCTURE
# =============================================================================
AWS_REGION="us-east-1"
ECS_CLUSTER_NAME="aerosense-cluster-production"
RDS_INSTANCE_ID="aerosense-db-production"
ELASTICACHE_CLUSTER_ID="aerosense-redis-production"

# =============================================================================
# PUSH NOTIFICATIONS (APNS Production)
# =============================================================================
# ⚠️  CRITICAL: Use production APNS certificates
APNS_KEY_ID="CHANGE_ME_APPLE_KEY_ID"
APNS_TEAM_ID="CHANGE_ME_APPLE_TEAM_ID"
APNS_BUNDLE_ID="com.aerosense.app"
APNS_USE_SANDBOX=false

# =============================================================================
# FEATURE FLAGS
# =============================================================================
# ⚠️  CRITICAL: Swagger disabled in production
# ⚠️  CRITICAL: Request logging disabled (use CloudWatch instead)
ENABLE_SWAGGER=false
ENABLE_REQUEST_LOGGING=false
USE_MOCK_FLIGHT_DATA=false

# =============================================================================
# OBSERVABILITY & MONITORING
# =============================================================================
CLOUDWATCH_LOGS_ENABLED=true
CLOUDWATCH_METRICS_ENABLED=true
TRACE_ENABLED=true
TRACE sampling rate
TRACE_SAMPLE_RATE=0.1

# =============================================================================
# SECURITY ALERTING (Optional)
# =============================================================================
# GuardDuty enabled via AWS console
# Security Hub enabled via AWS console
# AWS Config enabled via Terraform
